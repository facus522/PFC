%---------------------------------------------------------------------
%
%                          Capítulo 5
%
%---------------------------------------------------------------------

\chapter{Testing}

\begin{resumen}
	En este capítulo se presentarán las distintas pruebas de verificación y validación ejecutadas sobre el Web Service y la aplicación Android, así como tambien las configuraciones realizadas para entornos de pruebas locales.
\end{resumen}

%-------------------------------------------------------------------
\section{Pruebas automáticas de software}
%-------------------------------------------------------------------
\label{cap5:sec:pruebasautomaticas}

En esta etapa se realizaron distintas pruebas de verificación y validación tanto para el Web Service como para la aplicación Android, poniendo mayor énfasis en el primero, teniendo en cuenta que es el componente primordial para realizar las principales funcionalidades dentro de la aplicación.
\\

Este proceso de análisis y pruebas tienen las siguientes finalidades:

\begin{itemize}
	
	\item Comprobar que el sistema funciona tal y como se ha especificado en la etapa de requerimientos, satisfaciendo los mismos.
	
	\item Detección de comportamientos inesperados, defectuosos o que no cumplen la especificación inicial.
	
	\item Corresponder a las buenas prácticas de ingeniería de software, las cuales permiten desarrollar un producto que asegure calidad tanto en su despliegue como en la integración.
	
\end{itemize}

Logrando de esta forma responder ¿Estamos construyendo el producto correcto? ¿Estamos construyendo el producto correctamente?
\\

Para ello se realizaron pruebas de software inicialmente sobre el Web Service, mediante la utilización de distintas tecnologías que permitan testear cada uno de las funcionalidades implementadas y posteriormente la correcta integración con la aplicación Android. 
\\

Se implementaron testing automatizados principalmente sobre los distintos controladores del WS, ya que por la arquitectura definida inicialmente, cada uno de ellos invocará internamente a un servicio correspondiente, y este a su vez a un DAO (capa de datos). Mediante la utilización de los frameworks \textit{\textbf{JUnit}} y \textit{\textbf{Mockito}} se realizaron pruebas unitarias de los controladores, lo cual tiene como característica evaluar el correcto funcionamiento de un módulo en forma aislada, es decir se va probando de a pequeñas porciones de código donde la ejecución es más rápida. Para ello se establece un escenario posible con datos de entrada ejecutando las acciones de cada módulo en forma separada y corroborando el comportamiento esperado en las salidas de cada una de ellas \cite{junit}. 
\\

La forma de trabajar que posee JUnit sobre cada prueba unitaria es mediante la anotación \textit{@Test}. Dentro de cada uno de ellos se invoca a una funcionalidad de un determinado controlador, pasándole \textbf{datos estáticos} de entrada en la request y simulando objetos gracias a Mockito. El valor de retorno esperado se evalúa mediante afirmaciones ``\textit{asserts...}'' (Ej. assertNull, assertFalse, assertThrows), informando si la clase cumple con la especificación y retornando JUnit si el método pasó el caso de prueba o falló. 
\\

Luego sobre el WS se utilizó el servicio de \textit{\textbf{Jacoco}} (Java Code Coverage), el cual permite cuantificar el porcentaje de código fuente ejecutado en los distintos test en conjunto. De esta forma se determina la cantidad de código que es cubierto en las pruebas, lo cual es útil para la depuración de errores o detectar malas definiciones en los módulos del software \cite{jacoco}. Por lo tanto, en las distintas pruebas JUnit se tuvieron en cuenta las distintas entradas a colocar para que la cobertura cumpla con la mayor cantidad posible. 
\\

Como se puede ver en la Figura \ref{fig:coverage} se logró llegar a un 85\% de cobertura en el total del software, donde las principales funcionalidades dentro de los controladores, servicios y daos se encuentran totalmente cubiertos.

\begin{figure}[h!]
	\begin{center}
		\includegraphics[width=1\textwidth]%
		{Imagenes/Bitmap/coverage1}
		\caption{Code coverage Web Service}
		\label{fig:coverage}
	\end{center}
\end{figure}

Como ya se ha mencionado anteriormente, el SDK de Android está basado en Java, por lo tanto, también fue posible realizar pruebas unitarias mediante la utilización de JUnit. En este caso el foco principal de testing se basó en la integración de los distintos componentes tanto para la comunicación interna de los eventos en la aplicación como para la externa (comunicación con el WS). La metodología de trabajo es exactamente igual a la realizada anteriormente, colocando distintas entradas en las ejecuciones y evaluando los distintos resultados.

%-------------------------------------------------------------------
\section{Pruebas de usuario}
%-------------------------------------------------------------------
\label{cap5:sec:pruebasmanuales}

Finalmente se llevaron a cabo distintas pruebas manuales a ``nivel usuario''. Para poder llevar adelante estos casos de prueba, se simuló un servidor en la red local de trabajo. Para esto, se desplegó el Web Service en forma local, configurado para trabajar en una dirección IP fija y privada, en la cual se encuentra alojado el servidor de aplicaciones. Fue necesaria la configuración del DHCP del router para que se asigne siempre la misma IP a ese servidor, a partir de su MAC Address.
\\

Con el WS corriendo en la red, y el despliegue de la aplicación Android sobre un dispositivo móvil, se procedió a realizar testing sobre todos los componentes ya sea de manera individual e integrada, verificando el funcionamiento conjunto de los mismos. Se tuvieron en cuenta los distintos escenarios posibles a la hora de las pruebas, como puede ser la falta de conexión móvil, geolocalización, almacenamiento, vinculación y funcionamiento del WS, informando al usuario ante cada falla producida. También se verificó su uso con la utilización de WiFi y datos móviles, comparando y verificando el tiempo de respuesta en conexiones.
\\

Además, se realizaron pruebas sobre distintos dispositivos móviles Android, en diferentes versiones y resoluciones para verificar la adaptabilidad a cada uno de ellos, se produjo la utilización de la aplicación sobre distintos dispositivos de forma simultanea para verificar el correcto funcionamiento y conexión con el WS.

\newpage
\thispagestyle{empty}
\mbox{ }