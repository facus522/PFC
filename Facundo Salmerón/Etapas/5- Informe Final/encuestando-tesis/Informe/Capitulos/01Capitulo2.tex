%---------------------------------------------------------------------
%
%                          Capítulo 2
%
%---------------------------------------------------------------------

\chapter{Análisis y fundamentos teóricos}

\begin{resumen}
En este capítulo se presentará un análisis correspondiente a las bases teóricas del proyecto, teniendo en cuenta desde el punto de vista del Web Service, la aplicación Android y su relación con el diseño de solución propuesta. Los cuales son resultado de los requerimientos extraídos en función de la problemática detectada. 

A su vez, se llevará a cabo una presentación de las distintas tecnologías utilizadas, que servirá para comprender las decisiones de implementación que se tomaron, como por ejemplo el sistema operativo Android, el protocolo de transferencia HTTP, formatos de respuestas, etc.
\end{resumen}

%------------------------------------------------------------------
\section{Análisis del problema}
%-------------------------------------------------------------------
\label{cap2:sec:analisis-problema}

Según lo mencionado en el Capítulo 1 y en función del objetivo general del proyecto, se realizó un análisis del problema con la detección de los distintos requerimientos tanto funcionales como no funcionales, con la finalidad de poder elaborar una propuesta de acción en consecuencia.

%------------------------------------------------------------------
\subsection{Diagramas de casos de uso}
%-------------------------------------------------------------------
\label{cap2:subsec:diagramas-casouso}
Mediante el diagrama de casos de uso que se presenta a continuación (Figura \ref{fig:cu1} \& Figura \ref{fig:cu2}), se describe en forma gráfica la secuencia de operaciones que son llevadas a cabo por el sistema en respuesta a los eventos ejecutados por los distintos actores. Ésta técnica fue utilizada para la recolección de requerimientos funcionales de la aplicación.

\begin{figure}[h!]
	\begin{center}
		\includegraphics[width=0.8\textwidth]%
		{Imagenes/Bitmap/cu1}
		\caption{Diagrama de casos de uso 1}
		\label{fig:cu1}
	\end{center}
\end{figure}

\begin{figure}[h!]
	\begin{center}
		\includegraphics[width=0.8\textwidth]%
		{Imagenes/Bitmap/cu2}
		\caption{Diagrama de casos de uso 2}
		\label{fig:cu2}
	\end{center}
\end{figure}


%------------------------------------------------------------------
\subsection{Definición de casos de uso}
%-------------------------------------------------------------------
\label{cap2:subsec:definicion-casouso}
Con la finalidad de mantener un correcto orden, en el Apéndice \ref{ap1:fichas-casosuso} se podrán encontrar las correspondientes fichas de los casos de uso, que se encargan de describir cada uno de ellos en forma particular (referenciando desde la Tabla \ref{tab:cu001} a la \ref{tab:cu025}).

%------------------------------------------------------------------
\subsection{Requerimientos funcionales}
%-------------------------------------------------------------------
\label{cap2:subsec:requerimientos-funcionales}

\begin{itemize}
	
	\item Para acceder a todas las funcionalidades de la aplicación los usuarios deben tener creada una cuenta.
	
	\item El sistema permitirá registrar una nueva cuenta o iniciar sesión, en la pantalla de logueo.
	
	\item Los usuarios ingresarán colocando nombre de usuario y contraseña.
	
	\item Los usuarios podrán registrase como ``específicos'' o ``comunes''. Para el primer caso, los mismos deben poseer un código de validación en la registración, para poder utilizar las funcionalidades de dicho tipo de usuario.
	
	\item El sistema ejecutará en primer y única instancia una validación para poder utilizar los recursos del dispositivo móvil.
	
	\item Una vez que se haya iniciado sesión, en la pantalla principal se encontrarán las encuestas disponibles de resolución y las funcionalidades de ABMs (en el caso de los usuarios específicos).
	
	\item El sistema presentará controles y validaciones a la hora de resolver libremente las encuestas.
	
	\item El sistema permitirá a los usuarios ``comunes'' resolver solamente una vez cada encuesta, si cumple las validaciones previas.
	
	\item El sistema permitirá la resolución indefinida de encuestas por parte de los usuarios específicos.
	
	\item El sistema permitirá a los usuarios específicos la realización de ABMs sobre las encuestas.
	
	\item Se llevará a cabo un histórico sobre las encuestas registrando fecha y usuario de creación, modificación o eliminación.
	
	\item Se podrá asociar un tipo de respuesta en cada pregunta (Ej. multiple choice, desarrollo libre, etc.).
	
	\item El sistema deberá ser capaz de geoposicionar al usuario utilizando los sensores móviles del dispositivo.
	
	\item El sistema brindará la posibilidad de introducir manualmente el posicionamiento de resolución de encuestas, si dicho usuario no se encuentra en su residencia habitual (para mejor información estadística en las respuestas).
	
	\item La aplicación brindará noticias e informaciones relacionadas a epidemiologías, salud, medicina, etc.
	
	\item Los usuarios específicos serán los encargados de los ABMs de la sección noticias e informaciones.
	
	\item La aplicación brindará estadísticas instantáneas sobre cada encuesta ya resuelta al menos una vez.
	
	\item En las encuestas geolocalizadas, dentro de las estadísticas se presentarán mapas estadísticos con la distribución de respuestas, verificando los alcances zonales.
	
	\item La aplicación debe estar sincronizada con el Web Service mediante datos móviles para el almacenamiento de los usuarios, las encuestas y las resoluciones de las mismas.
	
	\item El sistema enviará notificaciones de alerta cuando se lo desee (por Ej. para informar la disponibilidad de una nueva encuesta).
	
	\item Los datos recolectados de la resolución de encuestas podrán ser exportados en formato Excel para el uso posterior por parte de profesionales.
	
\end{itemize}

%------------------------------------------------------------------
\subsection{Requerimientos no funcionales}
%-------------------------------------------------------------------
\label{cap2:subsec:requerimientos-nofuncionales}

\begin{itemize}
	
	\item El dispositivo debe poseer sistema operativo Android con una versión mayor o igual a la 4.4 (KitKat).
	
	\item El dispositivo debe tener GPS, tenerlo activo y con una localización válida.
	
	\item El dispositivo debe poseer conexión a internet.
	
	\item El dispositivo debe contar con al menos 15MB libre de espacio para almacenamiento.
	
	\item El sistema debe presentar una interfaz de uso intuitiva y sencilla.
	
	\item El sistema debe ser capaz de procesar las transacciones en segundos.
	
	\item El sistema debe ser capaz de actuar con varios usuarios concurrentes.
	
	\item Los almacenamientos en base de datos deben ser transaccionales para mantener la integridad de los datos.
	
	\item El sistema debe presentar mensajes informativos y orientados al usuario final.
	
	\item Las encuestas modificadas deben actualizarse instantáneamente en la base de datos para que todos los usuarios posean la versión correcta.
	
\end{itemize}

%------------------------------------------------------------------
\section{Elecciones de implementación}
%-------------------------------------------------------------------
\label{cap2:sec:elecciones-implementacion}

Una vez definidos todos los requerimientos que harán frente a la problemática mencionada, a continuación se mencionarán las decisiones de implementación que se tomaron en relación a los lenguajes de programación y herramientas utilizadas, para poder llevar a cabo los mismos cumpliendo la propuesta de solución adecuadamente.
\\

En lo que corresponde al desarrollo del proyecto, se decidió desde un comienzo separar al mismo en dos grandes módulos: el Web Service y la aplicación móvil Android. Como la temática principal está centrada sobre los datos de almacenamiento, tanto para el manejo de usuarios como para las encuestas y resoluciones en general, se consideró llevar a cabo el diseño y desarrollo de un Web Service que tendrá como funcionalidad montarse por encima de la base de datos y permitir acceder a ella, plasmando toda la lógica de negocio allí.
\\

Por parte de la aplicación Android, en éste tipo de proyecto no es posible montar una base de datos interna, es decir utilizando la memoria RAM del dispositivo, ya que los datos están fuertemente ligados a la interacción de los usuarios. Es necesario de disponer un servidor central para el almacenamiento de usuarios y login por ejemplo, pero principalmente para el manejo de encuestas y resultados, ya que las mismas poseen un carácter dinámico partiendo de la creación de un determinado usuario para luego ser distribuidas y resueltas por el resto de la comunidad. 
\\

Al poseer la lógica de negocios dentro del Web Service, la aplicación deberá consumir los servicios que el mismo expone para llevar adelante todas las funcionalidades establecidas, es por ello que sólo puede ser llevado a cabo por dispositivos que poseen acceso a Internet. De esta forma, la app queda abstraída de toda la lógica, haciendo que el día de mañana al querer realizar cambios sobre los mismos no sea necesario re-lanzar una nueva versión, la cual luego debería ser actualizada individualmente por cada usuario que la tenga instalada.

%------------------------------------------------------------------
\subsection{Lenguaje de programación}
%-------------------------------------------------------------------
\label{cap2:subsec:lenguaje-programacion}

Para llevar adelante el desarrollo de la aplicación móvil se escogió el lenguaje de programación Java. Es muy conocido en el ambiente de programación Android, por ser un lenguaje que tiene una comunidad bastante grande y sobre todo una comunidad con bastante experiencia en el desarrollo de software. Java juega un papel muy importante, principalmente en el soporte ante casi cualquier eventualidad presentada.
\\

En los últimos años apareció el lenguaje de programación Kotlin, el cual fue adoptado por Google como lenguaje oficial de desarrollo Android. Para los fines prácticos del proyecto, los resultados podrían ser alcanzados utilizando tanto Java como Kotlin. Sin embargo, éste último al poseer pocos años dentro del mercado, la cantidad de información disponible en la web es muy escasa, haciendo que a la hora de escoger entre los mencionados la decisión se incline por Java.
\\

En cuanto al desarrollo del Web Service, la distribución de posibilidades a la hora de elegir un lenguaje de programación es más variada en relación a la aplicación móvil. Para partir de un análisis, inicialmente se priorizó aquellos lenguajes compilados por sobre los interpretados, por poseer mayor velocidad de ejecución e implementaciones más robustas; y aquellos lenguajes orientados a objetos, ya que son más sencillos de mantener y se posee mayor fiabilidad al dividir el problema en pequeñas partes, pudiendo ser probadas de manera independiente.
\\

Analizando la propuesta de solución establecida anteriormente, donde la aplicación móvil tiene como finalidad consumir los servicios de un Web Service y éste a su vez mantiene las conexiones pertinentes con la base de datos, el modelo correcto a implementar es del estilo MVC (Modelo Vista Controlador). En el controlador se presentarán todos los \textit{endpoints} que serán accedidos por la aplicación mediante peticiones HTTP, los cuáles a su vez están relacionados con los servicios y modelos de datos.
\\

Para llevar adelante el modelo establecido, mediante investigaciones previas y por experiencia personal del ejecutor del proyecto en trabajos anteriores, se determinó que mediante la integración de los frameworks Spring y Hibernate, es posible cubrir todo el ciclo de vida del modelo MVC (en capítulos posteriores se brindarán más detalles de dichas elecciones). Dentro de los lenguajes compilados y orientados a objetos, dichos frameworks son compatibles tanto para Java como .NET. En la actualidad, ambos lenguajes son altamente utilizados en el mercado para el desarrollo de aplicaciones web backend, por lo cual el soporte y la documentación no serían un inconveniente.
\\

Se estableció que la implementación del Web Service sea llevada adelante bajo el lenguaje de programación Java. Más allá de la experiencia del desarrollador del proyecto utilizando el mismo, lo cuál permite no consumir tiempo extra en el aprendizaje de una nueva tecnología, se determinó que posee mayor portabilidad. Es decir, Java puede ser utilizado desde varios entornos de desarrollo integrado (IDE), cualquier sistema operativo y puede ser compilado por cualquier contenedor de servlets. En este caso .NET cuenta solamente con el IDE Visual Studio como oficial, el cuál puede ser ejecutado únicamente en plataformas con sistema operativo Windows de forma nativa, haciendo que ciertas funcionalidades no se encuentren disponibles en forma gratuita. 
\\

Por lo tanto, la máquina virtual de Java (JVM) se sitúa en un nivel superior al hardware del sistema sobre el que se pretende ejecutar la aplicación, y éste actúa como puente que entiende tanto el bytecode (programa Java compilado) como el sistema sobre el que se pretende ejecutar (Figura \ref{fig:jvm}). Entonces, cuando se escribe una aplicación Java se hace pensando que será ejecutada en una máquina virtual Java en concreto, siendo ésta la que en última instancia convierte de código bytecode a código nativo del dispositivo final, es decir pudiendo ser interpretado por cualquier sistema operativo \cite{javaLibro}.

\begin{figure}[h!]
	\begin{center}
		\includegraphics[width=0.8\textwidth]%
		{Imagenes/Bitmap/jvm}
		\caption{Máquina virtual Java - JVM}
		\label{fig:jvm}
	\end{center}
\end{figure}

%------------------------------------------------------------------
\section{Conceptos del lado del servidor}
%-------------------------------------------------------------------
\label{cap2:sec:conceptos-servidor}


\newpage
\thispagestyle{empty}
\mbox{ }